<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zuckabot Distributor</title>
<link rel="icon" href="data:," />
<style>
body { font-family: Arial, sans-serif; background:#0a0a0a; color:#fff; margin:0; padding:1rem; text-align:center; }
h1,h2,h3{margin:0.5rem 0;}
button { padding:10px 20px; margin:5px; font-size:16px; cursor:pointer; border:none; border-radius:6px; transition: all 0.2s; }
button:hover:not(:disabled){ transform: scale(1.05); }
button:disabled{ opacity:0.5; cursor:not-allowed; }
input { padding:6px; margin-left:5px; width:200px; border-radius:4px; border:none; }
.task { display:flex; justify-content:center; align-items:center; margin:10px; gap:10px; flex-wrap:wrap; }
.checkmark { display:none; color:#0f0; font-size:20px; animation: popin 0.3s ease forwards; }
@keyframes popin { 0% { transform: scale(0); } 100% { transform: scale(1); } }
.progress-container { width:100%; background:#222; border-radius:8px; overflow:hidden; margin:20px 0; height:20px; }
.progress-bar { height:100%; width:0; background:#0f0; transition: width 0.5s; }
.card { background:#111; border-radius:8px; padding:1rem; margin:1rem auto; max-width:500px; text-align:left; }
.tx-status { margin:5px 0; font-size:14px; }
</style>
</head>
<body>

<h1>Zuckabot</h1>
<h3>LIMITED TIME: 150M ZUCKA Pre-Launch Giveaway</h3>
<p>Projected PancakeSwap Launch Price: $0.05 per ZUCKA</p>

<div class="card">
<h3>Connect Wallet</h3>
<button id="connectWalletBtn" onclick="connectWallet()">Connect Wallet</button>
<p id="walletAddress"></p>
<p>ðŸ’¡ Best experience: Trust Wallet / MetaMask browser</p>
</div>

<button onclick="addToken()">Add ZUCKA</button>

<!-- Social Tasks -->
<div class="card">
<h3>âœ… Complete Social Tasks</h3>
<p>Help Zuckabot go viral: join, follow, share, then paste proof links.</p>

<div class="task">
  <span>Telegram ðŸ”´ Pending</span>
  <a href="https://t.me/zuckabotofficial/1" target="_blank"><button>Join / Open</button></a>
  <input id="telegramProof" placeholder="Paste proof link">
  <button onclick="verifyTask('telegram')">Submit Proof</button>
  <span class="checkmark" id="checkTelegram">âœ…</span>
</div>

<div class="task">
  <span>X (Twitter) ðŸ”´ Pending</span>
  <a href="https://x.com/zuckabottoken" target="_blank"><button>Follow / Repost</button></a>
  <input id="xProof" placeholder="Paste proof link">
  <button onclick="verifyTask('x')">Submit Proof</button>
  <span class="checkmark" id="checkX">âœ…</span>
</div>

<div class="task">
  <span>Facebook ðŸ”´ Pending</span>
  <a href="https://web.facebook.com/profile.php?id=61579580776149" target="_blank"><button>Like / Share</button></a>
  <input id="facebookProof" placeholder="Paste proof link">
  <button onclick="verifyTask('facebook')">Submit Proof</button>
  <span class="checkmark" id="checkFacebook">âœ…</span>
</div>
</div>

<!-- Claim -->
<div class="card">
<h3>Claim Your ZUCKA</h3>
<p>2-step: initiate claim â†’ finalize (~10 min). Fee paid on-chain.</p>
<button id="claimBtn" disabled onclick="initiateClaim()">Initiate Claim</button>
<button id="finalizeBtn" disabled onclick="finalizeClaim()">Finalize Claim</button>
<p class="tx-status" id="claimStatus"></p>
<p>Your claim amount: 1,500 ZUCKA â‰ˆ $75 at launch price</p>
</div>

<!-- Donation -->
<div class="card">
<h3>Quick Donation Calculator</h3>
<input type="number" id="donationUSD" placeholder="$ USD" oninput="updateDonation()">
<button id="donateBtn" disabled onclick="donate()">Donate</button>
<p>Donate: <span id="donationBNB">0</span> BNB â†’ <span id="donationZUCKA">0</span> ZUCKA (+bonus)</p>
<p class="tx-status" id="donateStatus"></p>
</div>

<!-- Stats -->
<div class="card">
<p>Claimed ZUCKA: <span id="claimedAmount">0</span> / 150,000,000</p>
<p>Unique Claim Wallets: <span id="uniqueWallets">--</span></p>
<p>Total Donations (BNB): <span id="totalDonations">0</span> BNB</p>
<div id="countdown">Loading countdown...</div>
<div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
</div>

<footer class="card">
<p>Â©2025 Zuckabot â€¢ Token: 0x54bff3901d7d27ffe21b9a23bc8efb48c9847048 â€¢ Distributor: 0xec222Dba73C17877773E411D15904bf205FbA149 â€¢ Treasury: 0x42e8D84Ff8ff8e5EaE8E2648Ebfa772ee4515c91</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/web3/dist/web3.min.js"></script>
<script>
let walletConnected = false;
let account = null;
let web3, provider;

// Contract ABIs
const tokenABI = [...];       // Your token ABI
const distributorABI = [...];  // Your distributor ABI

// Contract addresses
const tokenAddress = "0x54bff3901d7d27ffe21b9a23bc8efb48c9847048";
const distributorAddress = "0xec222Dba73C17877773E411D15904bf205FbA149";

// Contract instances
let distributor, token;

// Social task tracking
const tasks = {telegram:false, x:false, facebook:false};

// -------------------------
// Wallet Connect
// -------------------------
async function connectWallet() {
  if(window.ethereum) {
    try {
      await window.ethereum.request({ method:'eth_requestAccounts' });
      web3 = new Web3(window.ethereum);
      const chainId = await web3.eth.getChainId();
      if(chainId !== 56) { alert("Switch to BSC Mainnet"); return; }
      const accounts = await web3.eth.getAccounts();
      account = accounts[0];
      walletConnected = true;
      document.getElementById('walletAddress').innerText = account;
      distributor = new web3.eth.Contract(distributorABI, distributorAddress);
      token = new web3.eth.Contract(tokenABI, tokenAddress);
      updateClaimButton();
      document.getElementById('donateBtn').disabled = false;
    } catch(err){ console.error(err); alert("Wallet connection failed"); }
  } else {
    provider = new WalletConnectProvider.default({ rpc:{56:"https://bsc-dataseed.binance.org/"} });
    await provider.enable();
    web3 = new Web3(provider);
    const accounts = await web3.eth.getAccounts();
    account = accounts[0];
    walletConnected = true;
    distributor = new web3.eth.Contract(distributorABI, distributorAddress);
    token = new web3.eth.Contract(tokenABI, tokenAddress);
    document.getElementById('walletAddress').innerText = account;
    updateClaimButton();
    document.getElementById('donateBtn').disabled = false;
  }
}

// -------------------------
// Social Task Verification
// -------------------------
function verifyTask(task){
  const input=document.getElementById(task+'Proof');
  if(!input.value.trim()){ alert("Paste proof link first!"); return;}
  tasks[task]=true;
  localStorage.setItem('zucka_'+task, input.value.trim()); // save locally
  document.getElementById('check'+task.charAt(0).toUpperCase()+task.slice(1)).style.display='inline';
  updateClaimButton();
}

function allTasksDone(){ return Object.values(tasks).every(v=>v); }
function updateClaimButton(){ document.getElementById('claimBtn').disabled = !(allTasksDone() && walletConnected); }

// -------------------------
// Claim Functions
// -------------------------
async function initiateClaim(){
  if(!distributor || !account) return;
  document.getElementById('claimStatus').innerText = "Initiating...";
  try{
    const tx = await distributor.methods.initiateClaim().send({ from: account });
    document.getElementById('claimStatus').innerHTML = `Initiated. <a href="https://bscscan.com/tx/${tx.transactionHash}" target="_blank">View Tx</a>`;
    document.getElementById('finalizeBtn').disabled = false;
    document.getElementById('claimBtn').disabled = true;
    await updateStats();
  } catch(err){ console.error(err); document.getElementById('claimStatus').innerText = err.message; }
}

async function finalizeClaim(){
  if(!distributor || !account) return;
  document.getElementById('claimStatus').innerText = "Finalizing...";
  try{
    const fee = await distributor.methods.requiredClaimWei().call();
    const tx = await distributor.methods.finalizeClaim().send({ from: account, value: fee });
    document.getElementById('claimStatus').innerHTML = `Finalized! <a href="https://bscscan.com/tx/${tx.transactionHash}" target="_blank">View Tx</a>`;
    document.getElementById('finalizeBtn').disabled = true;
    await updateStats();
  } catch(err){ console.error(err); document.getElementById('claimStatus').innerText = err.message; }
}

// -------------------------
// Donation
// -------------------------
async function updateDonation(){
  const usd = parseFloat(document.getElementById('donationUSD').value)||0;
  document.getElementById('donationBNB').innerText = (usd/400).toFixed(4); // simple preview
  document.getElementById('donationZUCKA').innerText = (usd*2000).toFixed(0);
}

async function donate(){
  if(!distributor || !account) return;
  const usd = parseFloat(document.getElementById('donationUSD').value)||0;
  if(usd<1){ alert("Min $1 donation"); return; }
  const bnb = (usd/400).toFixed(6); // preview
  document.getElementById('donateStatus').innerText="Sending...";
  try{
    const tx = await distributor.methods.donate().send({ from: account, value: web3.utils.toWei(bnb,'ether') });
    document.getElementById('donateStatus').innerHTML=`Done! <a href="https://bscscan.com/tx/${tx.transactionHash}" target="_blank">View Tx</a>`;
    await updateStats();
  } catch(err){ console.error(err); document.getElementById('donateStatus').innerText = err.message; }
}

// -------------------------
// Stats
// -------------------------
async function updateStats(){
  if(!distributor) return;
  try{
    const totals = await distributor.methods.getTotals().call();
    document.getElementById('claimedAmount').innerText = (totals.tokensDistributed/1e18).toLocaleString();
    document.getElementById('totalDonations').innerText = (totals.bnbCollectedWei/1e18).toFixed(4);
    const progress = Math.min(100, (totals.tokensDistributed/150000000e18)*100);
    document.getElementById('progressBar').style.width = progress+'%';
  } catch(err){ console.error(err); }
}

// -------------------------
// Token Add
// -------------------------
async function addToken(){
  try{
    await ethereum.request({ method:'wallet_watchAsset', params:{
      type:'ERC20', options:{ address:tokenAddress, symbol:'ZUCKA', decimals:18 }
    }});
  } catch(err){ console.error(err); }
}

// -------------------------
// Countdown
// -------------------------
function updateCountdown(){
  const end=new Date('2025-09-30T23:59:00Z').getTime();
  const now=Date.now();
  const diff=end-now;
  if(diff<=0){ document.getElementById('countdown').innerText="Ended"; return;}
  const d=Math.floor(diff/86400000), h=Math.floor((diff%86400000)/3600000), m=Math.floor((diff%3600000)/60000), s=Math.floor((diff%60000)/1000);
  document.getElementById('countdown').innerText=`Ends in ${d}d ${h}h ${m}m ${s}s`;
}

// -------------------------
// Preload on page load
// -------------------------
window.addEventListener('load', async () => {
  await updateStats();
  ['telegram','x','facebook'].forEach(task => {
    const proof = localStorage.getItem('zucka_'+task);
    if(proof){
      tasks[task] = true;
      document.getElementById('check'+task.charAt(0).toUpperCase()+task.slice(1)).style.display='inline';
      document.getElementById(task+'Proof').value = proof;
    }
  });
  updateClaimButton();
});

setInterval(updateCountdown,1000);
setInterval(updateStats,10000);
</script>

</body>
</html>
