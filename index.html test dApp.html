<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zuckabot Giveaway</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background:#f9fafb; margin:0; padding:0; color:#111; }
    header { text-align:center; padding:20px; background:#2563eb; color:#fff; }
    h1 { font-size:24px; margin:10px 0; }
    main { max-width:800px; margin:20px auto; padding:10px; }
    .card { background:#fff; border-radius:12px; padding:20px; margin:15px 0; box-shadow:0 4px 10px rgba(0,0,0,0.08); }
    button { padding:10px 18px; margin:5px; border:none; border-radius:8px; background:#2563eb; color:#fff; cursor:pointer; }
    button:hover { background:#1e40af; }
    .stats p { font-size:16px; margin:6px 0; }
    .faq details { margin:10px 0; }
    .faq summary { font-weight:bold; cursor:pointer; }
    .socials a { margin:0 8px; color:#2563eb; text-decoration:none; font-weight:bold; }
    footer { text-align:center; padding:15px; font-size:14px; color:#555; }
    @media(max-width:600px) { h1 { font-size:20px; } .card { padding:15px; } button { width:100%; } }
  </style>
</head>
<body>

<header>
  <h1>Zuckabot Pre-Launch Giveaway</h1>
  <p>Claim your free $ZUCA tokens before PancakeSwap launch!</p>
</header>

<main>
  <!-- Wallet + Claim Section -->
  <div class="card" style="text-align:center">
    <button id="connectBtn">üîó Connect Wallet</button>
    <p id="walletAddress"></p>
    <button id="initiateBtn" disabled>‚ö° Initiate Claim</button>
    <button id="finalizeBtn" disabled>‚úÖ Finalize Claim</button>
    <p id="userBalance"></p>
  </div>

  <!-- Live Stats -->
  <div class="card">
    <h2>üìä Live Stats</h2>
    <div class="stats">
      <p><b>Tokens Distributed:</b> <span id="tokensDistributed">Loading...</span></p>
      <p><b>BNB Collected:</b> <span id="bnbCollected">Loading...</span></p>
      <p><b>BNB ‚âà USD:</b> <span id="bnbUSD">Loading...</span></p>
    </div>
    <button onclick="loadStats()">üîÑ Refresh</button>
  </div>

  <!-- FAQ -->
  <div class="card faq">
    <h2>‚ùì FAQ</h2>
    <details>
      <summary>Why is there a $0.25 fee?</summary>
      <p>The $0.25 fee (paid in BNB at live rates) helps prevent bots and abuse. It also supports gas and liquidity, with a goal of listing $ZUCA at $0.05 on PancakeSwap.</p>
    </details>
    <details>
      <summary>Can I claim more than once?</summary>
      <p>No. Only one wallet per user is allowed to claim in order to ensure fairness.</p>
    </details>
    <details>
      <summary>When will $ZUCA launch?</summary>
      <p>Target PancakeSwap listing at $0.05 soon after giveaway completion.</p>
    </details>
    <details>
      <summary>Is my claim safe?</summary>
      <p>Yes. Claims happen directly on-chain through verified contracts. No private data is ever collected.</p>
    </details>
  </div>

  <!-- Socials -->
  <div class="card socials" style="text-align:center">
    <h2>üåç Join the Community</h2>
    <a href="https://web.facebook.com/profile.php?id=61579580776149" target="_blank">Facebook</a>
    <a href="https://t.me/zuckabotofficial/1" target="_blank">Telegram</a>
    <a href="https://x.com/zuckabottoken" target="_blank">X (Twitter)</a>
  </div>
</main>

<footer>
  <p>Zuckabot Token CA: <small>0x54bff3901d7d27ffe21b9a23bc8efb48c9847048</small></p>
  <p>Distributor CA: <small>0xec222Dba73C17877773E411D15904bf205FbA149</small></p>
  <p>Treasury: <small>0x42e8D84Ff8ff8e5EaE8E2648Ebfa772ee4515c91</small></p>
</footer>

<script>
  // --- Config ---
  const tokenCA = "0x54bff3901d7d27ffe21b9a23bc8efb48c9847048";
  const distributorCA = "0xec222Dba73C17877773E411D15904bf205FbA149";
  const tokenABI = /* full token ABI here */ [];
  const distributorABI = /* full distributor ABI here */ [];

  const launchPrice = 0.05; // USD launch price per token
  let provider, signer, distributor, token, userAddress;

  // Connect Wallet
  async function connectWallet() {
    if (!window.ethereum) return alert("MetaMask or wallet required!");
    provider = new ethers.providers.Web3Provider(window.ethereum);
    await provider.send("eth_requestAccounts", []);
    signer = provider.getSigner();
    userAddress = await signer.getAddress();
    document.getElementById("walletAddress").innerText = `Connected: ${userAddress}`;
    distributor = new ethers.Contract(distributorCA, distributorABI, signer);
    token = new ethers.Contract(tokenCA, tokenABI, provider);
    document.getElementById("initiateBtn").disabled = false;
    loadUserBalance();
  }

  // Load User Balance
  async function loadUserBalance() {
    const bal = await token.balanceOf(userAddress);
    const balFormatted = ethers.utils.formatUnits(bal, 18);
    const usd = (parseFloat(balFormatted) * launchPrice).toFixed(2);
    document.getElementById("userBalance").innerText = `Balance: ${balFormatted} ZUCA ($${usd} est. at $0.05)`;
  }

  // Initiate Claim
  async function initiateClaim() {
    try {
      const tx = await distributor.initiateClaim();
      await tx.wait();
      alert("Claim initiated. Please finalize after cooldown.");
      document.getElementById("finalizeBtn").disabled = false;
    } catch (err) { console.error(err); alert("Error initiating claim."); }
  }

  // Finalize Claim (with fee)
  async function finalizeClaim() {
    try {
      const requiredFee = await distributor.requiredClaimWei();
      const tx = await distributor.finalizeClaim({ value: requiredFee });
      await tx.wait();
      alert("Claim finalized! Tokens received.");
      loadUserBalance();
    } catch (err) { console.error(err); alert("Error finalizing claim."); }
  }

  // Live Stats
  async function loadStats() {
    try {
      const totals = await distributor.getTotals();
      const tokens = ethers.utils.formatUnits(totals.tokensDistributed, 18);
      const bnb = ethers.utils.formatEther(totals.bnbCollectedWei);
      const bnbPrice18 = await distributor.getLatestBNBPrice18();
      const bnbPrice = parseFloat(ethers.utils.formatUnits(bnbPrice18, 18));
      document.getElementById("tokensDistributed").innerText = `${parseFloat(tokens).toLocaleString()} ZUCA`;
      document.getElementById("bnbCollected").innerText = `${parseFloat(bnb).toFixed(4)} BNB`;
      document.getElementById("bnbUSD").innerText = `$${(parseFloat(bnb) * bnbPrice).toFixed(2)}`;
    } catch (err) { console.error(err); }
  }

  // Event bindings
  document.getElementById("connectBtn").onclick = connectWallet;
  document.getElementById("initiateBtn").onclick = initiateClaim;
  document.getElementById("finalizeBtn").onclick = finalizeClaim;

  // Auto-refresh stats
  loadStats();
  setInterval(loadStats, 30000);
</script>

</body>
</html>
