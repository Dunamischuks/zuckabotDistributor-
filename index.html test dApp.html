<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zuckabot Pre-Launch Giveaway</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Embedded logo also used as favicon -->
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...YOUR_BASE64_LOGO_HERE..."/>
  <style>
    body { background:#0a0a0a; color:white; font-family:Arial, sans-serif; text-align:center; padding:20px; }
    img.logo { width:140px; margin:20px auto; display:block; animation:pulse 3s infinite; }
    h1 { color:#00f0ff; }
    button { background:#00f0ff; border:none; padding:12px 20px; border-radius:8px;
             font-size:16px; cursor:pointer; margin:10px; color:#000; font-weight:bold; }
    button:hover { background:#00c0cc; }
    #address { margin-top:15px; font-size:14px; color:#0ff; }
    #notifications { margin-top:20px; font-size:14px; }
    .error { color:#ff4d4d; }
    .success { color:#00ff9d; }
    @keyframes pulse {
      0% { filter:drop-shadow(0 0 5px #0ff); }
      50% { filter:drop-shadow(0 0 20px #0ff); }
      100% { filter:drop-shadow(0 0 5px #0ff); }
    }
  </style>
</head>
<body>

  <!-- Logo -->
  <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...YOUR_BASE64_LOGO_HERE..." alt="Zuckabot Logo" class="logo">

  <h1>Zuckabot Pre-Launch Giveaway</h1>
  <p>Claim your free Zuckabot tokens. Powered by BSC Network.</p>

  <button id="connectBtn">Connect Wallet</button>
  <button id="disconnectBtn">Disconnect</button>
  <button id="addTokenBtn">Add ZUCKA to Wallet</button>
  <button id="initiateBtn">Initiate Claim</button>
  <button id="finalizeBtn">Finalize Claim</button>

  <div id="address"></div>
  <div id="notifications"></div>

  <!-- ethers.js -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script>
    let provider, signer;
    const distributorCA = "0xec222Dba73C17877773E411D15904bf205FbA149";
    const zuckaCA = "0x54bff3901d7d27ffe21b9a23bc8efb48c9847048";
    const zuckaSymbol = "ZUCKA";
    const zuckaDecimals = 18;

    function notify(msg, type="") {
      document.getElementById("notifications").innerHTML =
        `<span class="${type}">${msg}</span>`;
    }

    async function connectWallet() {
      if (!window.ethereum) {
        notify("No Web3 wallet found. Please open in MetaMask or Trust Wallet.", "error");
        return;
      }
      try {
        provider = new ethers.providers.Web3Provider(window.ethereum);
        await provider.send("eth_requestAccounts", []);
        const network = await provider.getNetwork();
        if (network.chainId !== 56) {
          notify("Wrong network. Please switch to BSC Mainnet.", "error");
          return;
        }
        signer = provider.getSigner();
        const address = await signer.getAddress();
        document.getElementById("address").innerText = "Connected: " + address;
        document.getElementById("connectBtn").innerText = "Connected âœ…";
        notify("Wallet connected", "success");
      } catch (err) {
        console.error(err);
        notify("Connection failed: " + err.message, "error");
      }
    }

    function disconnectWallet() {
      signer = null;
      provider = null;
      document.getElementById("address").innerText = "";
      document.getElementById("connectBtn").innerText = "Connect Wallet";
      notify("Disconnected", "error");
    }

    async function addToken() {
      try {
        await window.ethereum.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: zuckaCA,
              symbol: zuckaSymbol,
              decimals: zuckaDecimals,
            },
          },
        });
        notify("ZUCKA token added to wallet", "success");
      } catch (err) {
        console.error(err);
        notify("Failed to add token", "error");
      }
    }

    async function initiateClaim() {
      if (!signer) return notify("Connect wallet first", "error");
      try {
        const distributor = new ethers.Contract(distributorCA, [
          "function initiateClaim() external"
        ], signer);
        const tx = await distributor.initiateClaim();
        notify("Claim initiated. Tx: " + tx.hash, "success");
      } catch (err) {
        console.error(err);
        notify("Initiate failed: " + err.message, "error");
      }
    }

    async function finalizeClaim() {
      if (!signer) return notify("Connect wallet first", "error");
      try {
        const distributor = new ethers.Contract(distributorCA, [
          "function finalizeClaim() external payable",
          "function requiredClaimWei() external view returns (uint256)"
        ], signer);
        const fee = await distributor.requiredClaimWei();
        const tx = await distributor.finalizeClaim({ value: fee });
        notify("Finalize submitted. Tx: " + tx.hash, "success");
      } catch (err) {
        console.error(err);
        notify("Finalize failed: " + err.message, "error");
      }
    }

    document.getElementById("connectBtn").onclick = connectWallet;
    document.getElementById("disconnectBtn").onclick = disconnectWallet;
    document.getElementById("addTokenBtn").onclick = addToken;
    document.getElementById("initiateBtn").onclick = initiateClaim;
    document.getElementById("finalizeBtn").onclick = finalizeClaim;
  </script>
</body>
</html>
